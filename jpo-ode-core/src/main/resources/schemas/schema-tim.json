{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
        "metadata": {
            "$ref": "#/$defs/OdeTimMetadata"
        },
        "payload": {
            "type": "object",
            "properties": {
                "data": {
                    "$ref": "https://raw.githubusercontent.com/CDOT-CV/jpo-asn-pojos/refs/heads/develop/jpo-asn-jsonschema-generator/src/main/resources/schemas/TravelerInformation/TravelerInformationMessageFrame.schema.json"
                },
                "dataType": {
                    "type": "string"
                }
            },
            "required": [
                "data",
                "dataType"
            ]
        }
    },
    "additionalProperties": false,
    "required": [
        "metadata",
        "payload"
    ],
    "$defs": {
        "OdeTimMetadata": {
            "type": "object",
            "properties": {
                "source": {
                    "enum": [
                        "RSU",
                        "TMC",
                        "UNKNOWN"
                    ],
                    "type": "string"
                },
                "logFileName": {
                    "type": "string"
                },
                "maxDurationTime": {
                    "type": "number"
                },
                "odePacketID": {
                    "type": "string"
                },
                "odeReceivedAt": {
                    "type": "string"
                },
                "odeTimStartDateTime": {
                    "type": "string"
                },
                "originIp": {
                    "type": "string"
                },
                "payloadType": {
                    "type": "string"
                },
                "receivedMessageDetails": {
                    "type": "object",
                    "properties": {
                        "rxSource": {
                            "type": "string"
                        }
                    }
                },
                "recordGeneratedAt": {
                    "type": "string"
                },
                "recordGeneratedBy": {
                    "$ref": "#/$defs/OdeRecordGeneratedBy"
                },
                "recordType": {
                    "type": "string"
                },
                "sanitized": {
                    "type": "boolean"
                },
                "schemaVersion": {
                    "const": 9,
                    "type": "integer"
                },
                "securityResultCode": {
                    "type": "string"
                },
                "serialId": {
                    "$ref": "#/$defs/OdeSerialId"
                },
                "asn1": {
                    "type": "string"
                },
                "request": {
                    "$ref": "#/$defs/MetadataRequest"
                }
            },
            "required": [
                "schemaVersion",
                "recordGeneratedBy",
                "payloadType",
                "odePacketID",
                "serialId",
                "sanitized",
                "recordGeneratedAt",
                "maxDurationTime",
                "odeReceivedAt"
            ]
        },
        "MetadataRequest": {
            "type": "object",
            "properties": {
                "ode": {
                    "$ref": "#/$defs/RequestOde"
                },
                "sdw": {
                    "$ref": "#/$defs/RequestSdw"
                },
                "rsus": {
                    "type": "array",
                    "prefixItems": [
                        {
                            "$ref": "#/$defs/RequestRsus"
                        }
                    ]
                },
                "snmp": {
                    "$ref": "#/$defs/RequestSnmp"
                }
            }
        },
        "RequestOde": {
            "type": "object",
            "properties": {
                "verb": {
                    "type": "string"
                },
                "version": {
                    "type": "integer"
                }
            },
            "required": [
                "verb",
                "version"
            ]
        },
        "RequestSdw": {
            "type": "object",
            "properties": {
                "serviceRegion": {
                    "$ref": "#/$defs/OdeGeoRegion"
                },
                "ttl": {
                    "type": "string",
                    "enum": [
                        "oneminute",
                        "thirtyminutes",
                        "oneday",
                        "oneweek",
                        "onemonth",
                        "oneyear"
                    ]
                },
                "groupID": {
                    "type": "string"
                },
                "deliverystart": {
                    "type": "string"
                },
                "deliverystop": {
                    "type": "string"
                },
                "recordId": {
                    "type": "string"
                },
                "estimatedRemovalDate": {
                    "type": "string"
                }
            },
            "required": [
                "recordId",
                "ttl",
                "serviceRegion"
            ]
        },
        "RequestRsus": {
            "type": "object",
            "properties": {
                "rsuTarget": {
                    "type": "string"
                },
                "rsuUsername": {
                    "type": "string"
                },
                "rsuPassword": {
                    "type": "string"
                },
                "snmpProtocol": {
                    "type": "string"
                },
                "rsuRetries": {
                    "type": "integer"
                },
                "rsuTimeout": {
                    "type": "integer"
                },
                "rsuIndex": {
                    "type": "integer"
                }
            },
            "required": [
                "rsuTarget",
                "rsuUsername",
                "rsuPassword",
                "snmpProtocol",
                "rsuRetries",
                "rsuTimeout",
                "rsuIndex"
            ]
        },
        "RequestSnmp": {
            "type": "object",
            "properties": {
                "mode": {
                    "type": "integer"
                },
                "deliverystop": {
                    "type": "string"
                },
                "rsuid": {
                    "type": "string"
                },
                "deliverystart": {
                    "type": "string"
                },
                "enable": {
                    "type": "integer"
                },
                "channel": {
                    "type": "integer"
                },
                "msgid": {
                    "type": "integer"
                },
                "interval": {
                    "type": "integer"
                },
                "status": {
                    "type": "integer"
                }
            },
            "required": [
                "mode",
                "deliverystart",
                "deliverystop",
                "rsuid",
                "enable",
                "channel",
                "msgid",
                "interval",
                "status"
            ]
        },
        "OdeGeoRegion": {
            "type": "object",
            "properties": {
                "nwCorner": {
                    "$ref": "#/$defs/OdePosition3D"
                },
                "seCorner": {
                    "$ref": "#/$defs/OdePosition3D"
                }
            },
            "required": [
                "nwCorner",
                "seCorner"
            ]
        },
        "OdeRecordGeneratedBy": {
            "type": [
                "string",
                "null"
            ],
            "enum": [
                "TMC",
                "OBU",
                "RSU",
                "TMC_VIA_SAT",
                "TMC_VIA_SNMP",
                "UNKNOWN",
                null
            ]
        },
        "OdeSerialId": {
            "type": "object",
            "properties": {
                "bundleId": {
                    "type": "number"
                },
                "bundleSize": {
                    "type": "number"
                },
                "recordId": {
                    "type": "number"
                },
                "serialNumber": {
                    "type": "number"
                },
                "streamId": {
                    "type": "string"
                }
            },
            "required": [
                "recordId",
                "serialNumber",
                "streamId",
                "bundleSize",
                "bundleId"
            ]
        },
        "OdePosition3D": {
            "type": "object",
            "properties": {
                "latitude": {
                    "type": "number"
                },
                "longitude": {
                    "type": "number"
                },
                "elevation": {
                    "type": "number"
                }
            },
            "required": [
                "latitude",
                "longitude"
            ]
        }
    }
}
